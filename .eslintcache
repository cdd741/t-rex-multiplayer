[{"D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\index.js":"1","D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\App.js":"2","D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\reportWebVitals.js":"3","D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\Canvas.js":"4","D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\connection\\socket.js":"5","D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\onboard\\onboard.js":"6","D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\onboard\\joinroom.js":"7","D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\onboard\\joingame.js":"8","D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\playerContext\\PlayerContext.js":"9","D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\connection\\videochat.js":"10","D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\playercontext\\PlayerContext.js":"11","D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\playercontext\\playercontext.js":"12"},{"size":500,"mtime":1608186994971,"results":"13","hashOfConfig":"14"},{"size":1474,"mtime":1608282352005,"results":"15","hashOfConfig":"14"},{"size":362,"mtime":1608186994971,"results":"16","hashOfConfig":"14"},{"size":7113,"mtime":1608326786063,"results":"17","hashOfConfig":"14"},{"size":462,"mtime":1608288070539,"results":"18","hashOfConfig":"14"},{"size":2763,"mtime":1608287760000,"results":"19","hashOfConfig":"14"},{"size":1915,"mtime":1608287780628,"results":"20","hashOfConfig":"14"},{"size":640,"mtime":1608292935121,"results":"21","hashOfConfig":"14"},{"size":176,"mtime":1608270865671,"results":"22","hashOfConfig":"14"},{"size":3449,"mtime":1608288087179,"results":"23","hashOfConfig":"14"},{"size":176,"mtime":1608282194982,"results":"24","hashOfConfig":"14"},{"size":176,"mtime":1608282194982,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"1jazmk9",{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35","usedDeprecatedRules":"28"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"49"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\index.js",[],["54","55"],"D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\App.js",[],"D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\reportWebVitals.js",[],"D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\Canvas.js",["56","57","58","59"],"import React, { useRef, useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { PlayerContext } from \"./playercontext/playercontext\";\r\nimport VideoChatApp from \"./connection/videochat\";\r\nconst socket = require(\"./connection/socket\").socket;\r\n\r\nconst Canvas = (props) => {\r\n  const [p1Direction, setP1Direction] = useState(0);\r\n  const [p2Direction, setP2Direction] = useState(0);\r\n  const [p1JumpHeight, setP1JumpHeight] = useState(0);\r\n  const [p2JumpHeight, setP2JumpHeight] = useState(0);\r\n  const [p1Jump, setP1Jump] = useState(false);\r\n  const [p2Jump, setP2Jump] = useState(false);\r\n  const iAmPlayerOne = props.player;\r\n  const maxHeight = 225;\r\n  const canvasWidth = 500;\r\n  const canvasHeight = 300;\r\n  const canvasRef = useRef(null);\r\n\r\n  const draw = (ctx) => {\r\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n    ctx.fillStyle = \"#00000\";\r\n    ctx.beginPath();\r\n\r\n    if (p1JumpHeight === 0) {\r\n      setP1Jump(false);\r\n    } else if (p1JumpHeight === maxHeight) {\r\n      setP1Direction(1);\r\n    }\r\n\r\n    if (p1Jump === true) {\r\n      ctx.rect(50, 250 - p1JumpHeight, 50, 50);\r\n      setP1JumpHeight(p1JumpHeight - p1Direction);\r\n    } else {\r\n      ctx.rect(50, 250, 50, 50);\r\n    }\r\n\r\n    if (p2JumpHeight === 0) {\r\n      setP2Jump(false);\r\n    } else if (p2JumpHeight === maxHeight) {\r\n      setP2Direction(1);\r\n    }\r\n\r\n    if (p2Jump === true) {\r\n      ctx.rect(125, 250 - p2JumpHeight, 50, 50);\r\n      setP2JumpHeight(p2JumpHeight - p2Direction);\r\n    } else {\r\n      ctx.rect(125, 250, 50, 50);\r\n    }\r\n\r\n    ctx.fill();\r\n  };\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext(\"2d\");\r\n    let animationFrameId;\r\n\r\n    // console.log(p1JumpHeight, p1Jump);\r\n\r\n    // draw\r\n    const render = () => {\r\n      draw(context);\r\n      animationFrameId = window.requestAnimationFrame(render);\r\n    };\r\n    render();\r\n\r\n    return () => {\r\n      window.cancelAnimationFrame(animationFrameId);\r\n    };\r\n  }, [draw]);\r\n\r\n  useEffect(() => {\r\n    const handleKeyPress = (event) => {\r\n      if (event.key === \" \") {\r\n        console.log(iAmPlayerOne, \"key press jump\");\r\n        jump(iAmPlayerOne);\r\n        console.log(\"socket\");\r\n        socket.emit(\"jump\", {\r\n          gameId: props.gameId,\r\n          isPlayerOne: iAmPlayerOne,\r\n        });\r\n      }\r\n    };\r\n    window.addEventListener(\"keydown\", handleKeyPress);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", handleKeyPress);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    socket.on(\"opponent jump\", (info) => {\r\n      console.log(info.isPlayerOne, \" jump\");\r\n      jump(info.isPlayerOne);\r\n    });\r\n  }, []);\r\n\r\n  const jump = (playerOne) => {\r\n    if (playerOne) {\r\n      setP1Jump(true);\r\n      setP1JumpHeight(1);\r\n      setP1Direction(-1);\r\n      console.log(\"p1 jump\");\r\n    } else {\r\n      setP2Jump(true);\r\n      setP2JumpHeight(1);\r\n      setP2Direction(-1);\r\n      console.log(\"p2 jump\");\r\n    }\r\n\r\n    // if (playerOne === iAmPlayerOne) {\r\n    // }\r\n  };\r\n\r\n  return (\r\n    <canvas\r\n      ref={canvasRef}\r\n      width={canvasWidth}\r\n      height={canvasHeight}\r\n      {...props}\r\n      style={{ border: \"1px solid #000000\" }}\r\n    />\r\n  );\r\n};\r\n\r\nconst GameWrapper = (props) => {\r\n  const domainName = \"http://localhost:3000\";\r\n  const player = React.useContext(PlayerContext);\r\n  const { gameid } = useParams();\r\n  const [opponentSocketId, setOpponentSocketId] = React.useState(\"\");\r\n  const [opponentDidJoinTheGame, didJoinGame] = React.useState(false);\r\n  const [opponentUserName, setUserName] = React.useState(\"\");\r\n  const [gameSessionDoesNotExist, doesntExist] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    socket.on(\"playerJoinedRoom\", (statusUpdate) => {\r\n      console.log(\r\n        \"A new player has joined the room! Username: \" +\r\n          statusUpdate.userName +\r\n          \", Game id: \" +\r\n          statusUpdate.gameId +\r\n          \" Socket id: \" +\r\n          statusUpdate.mySocketId\r\n      );\r\n      if (socket.id !== statusUpdate.mySocketId) {\r\n        setOpponentSocketId(statusUpdate.mySocketId);\r\n      }\r\n    });\r\n\r\n    socket.on(\"status\", (statusUpdate) => {\r\n      console.log(statusUpdate);\r\n      alert(statusUpdate);\r\n      if (\r\n        statusUpdate === \"This game session does not exist.\" ||\r\n        statusUpdate === \"There are already 2 people playing in this room.\"\r\n      ) {\r\n        doesntExist(true);\r\n      }\r\n    });\r\n\r\n    socket.on(\"start game\", (opponentUserName) => {\r\n      console.log(\"START!\");\r\n      if (opponentUserName !== props.myUserName) {\r\n        setUserName(opponentUserName);\r\n        didJoinGame(true);\r\n      } else {\r\n        socket.emit(\"request username\", gameid);\r\n      }\r\n    });\r\n\r\n    socket.on(\"give userName\", (socketId) => {\r\n      if (socket.id !== socketId) {\r\n        console.log(\"give userName stage: \" + props.myUserName);\r\n        socket.emit(\"recieved userName\", {\r\n          userName: props.myUserName,\r\n          gameId: gameid,\r\n        });\r\n      }\r\n    });\r\n\r\n    socket.on(\"get Opponent UserName\", (data) => {\r\n      if (socket.id !== data.socketId) {\r\n        setUserName(data.userName);\r\n        console.log(\"data.socketId: data.socketId\");\r\n        setOpponentSocketId(data.socketId);\r\n        didJoinGame(true);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {opponentDidJoinTheGame ? (\r\n        <div>\r\n          <h4> Opponent: {opponentUserName} </h4>\r\n          <div style={{ display: \"flex\" }}>\r\n            <Canvas gameId={gameid} player={player.didRedirect} />\r\n            <VideoChatApp\r\n              mySocketId={socket.id}\r\n              opponentSocketId={opponentSocketId}\r\n              myUserName={props.myUserName}\r\n              opponentUserName={opponentUserName}\r\n            />\r\n          </div>\r\n          <h4> You: {props.myUserName} </h4>\r\n        </div>\r\n      ) : gameSessionDoesNotExist ? (\r\n        <div>\r\n          <h1 style={{ textAlign: \"center\", marginTop: \"200px\" }}> :( </h1>\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <h1\r\n            style={{\r\n              textAlign: \"center\",\r\n              marginTop: String(window.innerHeight / 8) + \"px\",\r\n            }}\r\n          >\r\n            Hey <strong>{props.myUserName}</strong>, copy and paste the URL\r\n            below to send to your friend:\r\n          </h1>\r\n          <textarea\r\n            style={{\r\n              marginLeft: String(window.innerWidth / 2 - 290) + \"px\",\r\n              marginTop: \"30\" + \"px\",\r\n              width: \"580px\",\r\n              height: \"30px\",\r\n            }}\r\n            onFocus={(event) => {\r\n              console.log(\"sd\");\r\n              event.target.select();\r\n            }}\r\n            value={domainName + \"/game/\" + gameid}\r\n            type=\"text\"\r\n          ></textarea>\r\n          <br></br>\r\n\r\n          <h1 style={{ textAlign: \"center\", marginTop: \"100px\" }}>\r\n            {\" \"}\r\n            Waiting for other opponent to join the game...{\" \"}\r\n          </h1>\r\n        </div>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default GameWrapper;\r\n","D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\connection\\socket.js",[],"D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\onboard\\onboard.js",[],"D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\onboard\\joinroom.js",[],"D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\onboard\\joingame.js",[],"D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\playerContext\\PlayerContext.js",[],["60","61"],"D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\connection\\videochat.js",[],["62","63"],"D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\playercontext\\PlayerContext.js",[],"D:\\Study\\web dev\\t_rex_runner\\t_rex_runner\\src\\playercontext\\playercontext.js",[],{"ruleId":"64","replacedBy":"65"},{"ruleId":"66","replacedBy":"67"},{"ruleId":"68","severity":1,"message":"69","line":20,"column":9,"nodeType":"70","endLine":52,"endColumn":4},{"ruleId":"68","severity":1,"message":"71","line":90,"column":6,"nodeType":"72","endLine":90,"endColumn":8,"suggestions":"73"},{"ruleId":"68","severity":1,"message":"74","line":190,"column":6,"nodeType":"72","endLine":190,"endColumn":8,"suggestions":"75"},{"ruleId":"76","severity":1,"message":"77","line":226,"column":31,"nodeType":"78","messageId":"79","endLine":226,"endColumn":32},{"ruleId":"64","replacedBy":"80"},{"ruleId":"66","replacedBy":"81"},{"ruleId":"64","replacedBy":"82"},{"ruleId":"66","replacedBy":"83"},"no-native-reassign",["84"],"no-negated-in-lhs",["85"],"react-hooks/exhaustive-deps","The 'draw' function makes the dependencies of useEffect Hook (at line 71) change on every render. Move it inside the useEffect callback. Alternatively, wrap the definition of 'draw' in its own useCallback() Hook.","VariableDeclarator","React Hook useEffect has missing dependencies: 'iAmPlayerOne' and 'props.gameId'. Either include them or remove the dependency array.","ArrayExpression",["86"],"React Hook React.useEffect has missing dependencies: 'gameid' and 'props.myUserName'. Either include them or remove the dependency array.",["87"],"no-useless-concat","Unexpected string concatenation of literals.","BinaryExpression","unexpectedConcat",["84"],["85"],["84"],["85"],"no-global-assign","no-unsafe-negation",{"desc":"88","fix":"89"},{"desc":"90","fix":"91"},"Update the dependencies array to be: [iAmPlayerOne, props.gameId]",{"range":"92","text":"93"},"Update the dependencies array to be: [gameid, props.myUserName]",{"range":"94","text":"95"},[2528,2530],"[iAmPlayerOne, props.gameId]",[5333,5335],"[gameid, props.myUserName]"]